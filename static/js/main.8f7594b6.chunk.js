(this["webpackJsonpadv-dashboard"]=this["webpackJsonpadv-dashboard"]||[]).push([[0],{139:function(e,t,n){e.exports=n(239)},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},150:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(23),s=n.n(i),c=(n(144),n(16)),o=(n(145),n(2)),u=n(29),l=n(65),h=n(27),d=n(14),p=function(e){var t=e.children,n=Object(d.a)(e,["children"]);return r.a.createElement("label",Object.assign({className:"label"},n),t)},f=(n(146),function(e){var t=e.children,n=Object(d.a)(e,["children"]);return r.a.createElement("button",Object.assign({className:"btn"},n),t)}),m=(n(147),function(e){var t=e.dataSourceOptions,n=e.campaignOptions,i=e.model,s=e.onApply,d=Object(a.useState)({dataSources:[],campaigns:[]}),m=Object(c.a)(d,2),b=m[0],g=m[1],v=Object(a.useCallback)((function(e,t){var n=t.name;g(Object(u.a)({},i,Object(o.a)({},n,(e||[]).map((function(e){return e.value})))))}),[i]);return r.a.createElement("div",{className:"sidebar"},r.a.createElement("h2",null,"Filter dimension values"),r.a.createElement(p,null,"Data Source",r.a.createElement(l.a,{className:"select",name:"dataSources",placeholder:"All",options:t,isMulti:!0,filterOption:Object(h.b)({ignoreAccents:!1}),onChange:v})),r.a.createElement(p,null,"Campaign",r.a.createElement(l.a,{className:"select",name:"campaigns",placeholder:"All",options:n,isMulti:!0,filterOption:Object(h.b)({ignoreAccents:!1}),onChange:v})),r.a.createElement(f,{onClick:function(){s(b)}},"Apply"))}),b=(n(150),function(){return r.a.createElement("div",{className:"lds-dual-ring"})}),g=n(246),v=n(64),y=n.n(v),x=n(28),O=Object(g.b)("%d.%m.%Y"),j=function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=Object(a.useState)([]),r=Object(c.a)(n,2),i=r[0],s=r[1],o=Object(a.useState)(null),u=Object(c.a)(o,2),l=u[0],h=u[1],d=Object(a.useState)(!1),p=Object(c.a)(d,2),f=p[0],m=p[1];return Object(a.useEffect)((function(){!function(){var n;y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,m(!0),a.next=4,y.a.awrap(Object(x.a)(e,t));case 4:n=a.sent,s(n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),h(a.t0);case 11:return a.prev=11,m(!1),a.finish(11);case 14:case"end":return a.stop()}}),null,null,[[0,8,11,14]])}()}),[e,t]),{data:i,error:l,isLoading:f}}("http://adverity-challenge.s3-website-eu-west-1.amazonaws.com/DAMKBAoDBwoDBAkOBAYFCw.csv",Object(a.useCallback)((function(e){return e.Date=O(e.Date),e.Clicks=parseInt(e.Clicks,10),e.Impressions=parseInt(e.Impressions,10),e}),[]))},A=n(46),k=n.n(A),S=function(e){return Object(a.useMemo)((function(){return k()(e,(function(e){return e.Datasource})).map((function(e){return{value:e.Datasource,label:e.Datasource}}))}),[e])},w=function(e){return Object(a.useMemo)((function(){return k()(e,(function(e){return e.Campaign})).map((function(e){return{value:e.Campaign,label:e.Campaign}}))}),[e])},C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(a.useMemo)((function(){return n.filter((function(n){var a=!e.length||e.includes(n.Datasource),r=!t.length||t.includes(n.Campaign);return a&&r}))}),[e,t,n])},G=n(95),E=function(e){var t=Object(u.a)({marginTop:40,marginRight:75,marginBottom:70,marginLeft:75},e);return Object(u.a)({},t,{boundedHeight:Math.max(t.height-t.marginTop-t.marginBottom,0),boundedWidth:Math.max(t.width-t.marginLeft-t.marginRight,0)})},I={},D=n(8),B=n(9),N=n(17),M=function(){function e(t){Object(D.a)(this,e),this.initAccessors(),this.initScales(),this.initGenerators(),this.initGroups(t)}return Object(B.a)(e,[{key:"initAccessors",value:function(){this.yAccessorClicks=function(e){return e.Clicks},this.yAccessorImpressions=function(e){return e.Impressions},this.xAccessor=function(e){return e.Date}}},{key:"initScales",value:function(){this.yScaleClicks=N.f(),this.yScaleImpressions=N.f(),this.xScale=N.g()}},{key:"initGenerators",value:function(){var e=this,t=N.e().defined((function(t){return!isNaN(e.yAccessorClicks(t))})).x((function(t){return e.xScale(e.xAccessor(t))})).y((function(t){return e.yScaleClicks(e.yAccessorClicks(t))})),n=N.e().defined((function(t){return!isNaN(e.yAccessorImpressions(t))})).x((function(t){return e.xScale(e.xAccessor(t))})).y((function(t){return e.yScaleImpressions(e.yAccessorImpressions(t))}));this.pathData=[{title:"Clicks",lineGenerator:t,color:"#af9358"},{title:"Impressions",lineGenerator:n,color:"#4C63B6"}],this.yAxisGeneratorClicks=N.b().scale(this.yScaleClicks),this.yAxisGeneratorImpressions=N.c().scale(this.yScaleImpressions),this.xAxisGenerator=N.a().scale(this.xScale)}},{key:"initGroups",value:function(e){this.svg=N.h(e).append("svg"),this.bounds=this.svg.append("g"),this.yAxisGroupClicks=this.bounds.append("g"),this.yAxisGroupImpressions=this.bounds.append("g"),this.xAxisGroup=this.bounds.append("g"),this.chartGroup=this.bounds.append("g"),this.legendGroup=this.bounds.append("g")}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.updateBounds(e),this.updateScales(e,t),this.updateAxis(e),this.updateLegends(e),this.updatePaths(e,t)}},{key:"updateBounds",value:function(e){this.svg.attr("width",e.width).attr("height",Math.max(0,e.height-10)).style("position","absolute"),this.bounds.style("transform","translate(".concat(e.marginLeft,"px, ").concat(e.marginTop,"px)"))}},{key:"updateScales",value:function(e,t){this.yScaleClicks.domain(N.d(t,this.yAccessorClicks)).range([e.boundedHeight,0]).nice(),this.yScaleImpressions.domain(N.d(t,this.yAccessorImpressions)).range([e.boundedHeight,0]).nice(),this.xScale.domain(N.d(t,this.xAccessor)).range([0,e.boundedWidth]).nice()}},{key:"updateAxis",value:function(e){this.yAxisGroupClicks.transition(1e3).call(this.yAxisGeneratorClicks),this.yAxisGroupImpressions.transition(1e3).call(this.yAxisGeneratorImpressions).style("transform","translateX(".concat(e.boundedWidth,"px)")),this.xAxisGroup.transition(1e3).call(this.xAxisGenerator).style("transform","translateY(".concat(e.boundedHeight,"px)"))}},{key:"updateLegends",value:function(e){var t=this.legendGroup.selectAll("svg").data(this.pathData);t.exit().remove(),t.attr("x",(function(e,t){return 200*t})).attr("y",e.boundedHeight+25);var n=t.enter().append("svg").attr("viewBox","0 0 200 50").attr("x",(function(e,t){return 200*t})).attr("y",e.boundedHeight+25).attr("width",200).attr("height",60);n.append("rect").attr("x",0).attr("y",5).attr("width",30).attr("height",5).attr("fill",(function(e){return e.color})),n.append("text").attr("x",40).attr("y",12).attr("fill","#777").style("font-size","1.8rem").text((function(e){return e.title}))}},{key:"updatePaths",value:function(e,t){var n=this.chartGroup.selectAll("path").data(this.pathData);n.exit().remove(),n.transition(1e3).attr("d",(function(e){return e.lineGenerator(t)})),n.enter().append("path").attr("d",(function(e){return e.lineGenerator(t)})).attr("fill","none").attr("stroke",(function(e){return e.color})).attr("stroke-width",2)}}]),e}(),R=(n(238),function(e){var t=e.data,n=Object(a.useRef)(),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=Object(a.useRef)(),n=Object(a.useMemo)((function(){return E(e)}),[e]),r=Object(a.useState)(0),i=Object(c.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(0),h=Object(c.a)(l,2),d=h[0],p=h[1];Object(a.useEffect)((function(){var e=t.current,n=new G.a((function(e){if(Array.isArray(e)&&e.length){var t=e[0];s!==t.contentRect.width&&o(t.contentRect.width),d!==t.contentRect.height&&p(t.contentRect.height)}}));return n.observe(e),function(){return n.unobserve(e)}}),[n,d,s]);var f=Object(a.useMemo)((function(){return E(Object(u.a)({},n,{width:n.width||s,height:n.height||d}))}),[n,s,d]);return[t,f]}(),s=Object(c.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){n.current=new M(o.current)}),[o]),Object(a.useEffect)((function(){n.current.update(l,t)}),[l,t]),r.a.createElement("div",{ref:o,className:"chart"})});var L=function(){var e=j(),t=e.data,n=e.isLoading,i=e.error,s=Object(a.useState)({dataSources:[],campaigns:[]}),o=Object(c.a)(s,2),u=o[0],l=o[1],h=u.dataSources,d=u.campaigns,p=S(t),f=w(t),g=C(h,d,t);return i?r.a.createElement("div",null,"Unexpected error ocurred. Please refresh your page."):n?r.a.createElement(b,null):r.a.createElement("div",{className:"app"},r.a.createElement(m,{model:u,dataSourceOptions:p,campaignOptions:f,onApply:function(e){l(e)}}),r.a.createElement(R,{data:g}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[139,1,2]]]);
//# sourceMappingURL=main.8f7594b6.chunk.js.map