(this["webpackJsonpadv-dashboard"]=this["webpackJsonpadv-dashboard"]||[]).push([[0],{139:function(t,e,n){t.exports=n(239)},144:function(t,e,n){},145:function(t,e,n){},234:function(t,e,n){},235:function(t,e,n){},236:function(t,e,n){},238:function(t,e,n){},239:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),i=n(23),s=n.n(i),c=(n(144),n(16)),o=(n(145),n(2)),u=n(29),l=n(44),h=n.n(l),d=n(95),p=n(27),f=function(t){return r.a.createElement(d.a,Object.assign({className:"select",filterOption:Object(p.b)({ignoreAccents:!1})},t))},m=n(14),g=function(t){var e=t.children,n=Object(m.a)(t,["children"]);return r.a.createElement("label",Object.assign({className:"label"},n),e)},b=(n(234),function(t){var e=t.children,n=Object(m.a)(t,["children"]);return r.a.createElement("button",Object.assign({className:"btn"},n),e)}),v=(n(235),function(t){var e=t.data,n=t.onApply,i=Object(a.useState)({dataSources:[],campaigns:[]}),s=Object(c.a)(i,2),l=s[0],d=s[1],p=function(t){return Object(a.useMemo)((function(){return h()(t,(function(t){return t.Datasource})).map((function(t){return{value:t.Datasource,label:t.Datasource}}))}),[t])}(e),m=function(t,e){return Object(a.useMemo)((function(){var n=t.filter((function(t){return!e.length||e.includes(t.Datasource)}));return h()(n,(function(t){return t.Campaign})).map((function(t){return{value:t.Campaign,label:t.Campaign}}))}),[t,e])}(e,l.dataSources),v=function(t,e){var n=e.name;d(Object(u.a)({},l,Object(o.a)({},n,(t||[]).map((function(t){return t.value})))))};return r.a.createElement("div",{className:"sidebar"},r.a.createElement("h2",null,"Filter dimension values"),r.a.createElement(g,null,"Data Source",r.a.createElement(f,{name:"dataSources",placeholder:"All",options:p,isMulti:!0,onChange:v})),r.a.createElement(g,null,"Campaign",r.a.createElement(f,{name:"campaigns",placeholder:"All",options:m,isMulti:!0,onChange:v})),r.a.createElement(b,{onClick:function(){n(l)}},"Apply"))}),y=(n(236),function(){return r.a.createElement("div",{className:"lds-dual-ring"})}),x=n(246),O=n(64),j=n.n(O),A=n(28),k=Object(x.b)("%d.%m.%Y"),S=function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=Object(a.useState)([]),r=Object(c.a)(n,2),i=r[0],s=r[1],o=Object(a.useState)(null),u=Object(c.a)(o,2),l=u[0],h=u[1],d=Object(a.useState)(!1),p=Object(c.a)(d,2),f=p[0],m=p[1];return Object(a.useEffect)((function(){!function(){var n;j.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,m(!0),a.next=4,j.a.awrap(Object(A.a)(t,e));case 4:n=a.sent,s(n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),h(a.t0);case 11:return a.prev=11,m(!1),a.finish(11);case 14:case"end":return a.stop()}}),null,null,[[0,8,11,14]])}()}),[t,e]),{data:i,error:l,isLoading:f}}("http://adverity-challenge.s3-website-eu-west-1.amazonaws.com/DAMKBAoDBwoDBAkOBAYFCw.csv",Object(a.useCallback)((function(t){return t.Date=k(t.Date),t.Clicks=parseInt(t.Clicks,10),t.Impressions=parseInt(t.Impressions,10),t}),[]))},w=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(a.useMemo)((function(){return n.filter((function(n){var a=!t.length||t.includes(n.Datasource),r=!e.length||e.includes(n.Campaign);return a&&r}))}),[t,e,n])},C=n(94),G=function(t){var e=Object(u.a)({marginTop:40,marginRight:75,marginBottom:70,marginLeft:75},t);return Object(u.a)({},e,{boundedHeight:Math.max(e.height-e.marginTop-e.marginBottom,0),boundedWidth:Math.max(e.width-e.marginLeft-e.marginRight,0)})},E={},I=n(8),D=n(9),B=n(17),M=function(){function t(e){Object(I.a)(this,t),this.initAccessors(),this.initScales(),this.initGenerators(),this.initGroups(e)}return Object(D.a)(t,[{key:"initAccessors",value:function(){this.yAccessorClicks=function(t){return t.Clicks},this.yAccessorImpressions=function(t){return t.Impressions},this.xAccessor=function(t){return t.Date}}},{key:"initScales",value:function(){this.yScaleClicks=B.f(),this.yScaleImpressions=B.f(),this.xScale=B.g()}},{key:"initGenerators",value:function(){var t=this,e=B.e().defined((function(e){return!isNaN(t.yAccessorClicks(e))})).x((function(e){return t.xScale(t.xAccessor(e))})).y((function(e){return t.yScaleClicks(t.yAccessorClicks(e))})),n=B.e().defined((function(e){return!isNaN(t.yAccessorImpressions(e))})).x((function(e){return t.xScale(t.xAccessor(e))})).y((function(e){return t.yScaleImpressions(t.yAccessorImpressions(e))}));this.pathData=[{title:"Clicks",lineGenerator:e,color:"#af9358"},{title:"Impressions",lineGenerator:n,color:"#4C63B6"}],this.yAxisGeneratorClicks=B.b().scale(this.yScaleClicks),this.yAxisGeneratorImpressions=B.c().scale(this.yScaleImpressions),this.xAxisGenerator=B.a().scale(this.xScale)}},{key:"initGroups",value:function(t){this.svg=B.h(t).append("svg"),this.bounds=this.svg.append("g"),this.yAxisGroupClicks=this.bounds.append("g"),this.yAxisGroupImpressions=this.bounds.append("g"),this.xAxisGroup=this.bounds.append("g"),this.chartGroup=this.bounds.append("g"),this.legendGroup=this.bounds.append("g")}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.updateBounds(t),this.updateScales(t,e),this.updateAxis(t),this.updateLegends(t),this.updatePaths(t,e)}},{key:"updateBounds",value:function(t){this.svg.attr("width",t.width).attr("height",Math.max(0,t.height-10)).style("position","absolute"),this.bounds.style("transform","translate(".concat(t.marginLeft,"px, ").concat(t.marginTop,"px)"))}},{key:"updateScales",value:function(t,e){this.yScaleClicks.domain(B.d(e,this.yAccessorClicks)).range([t.boundedHeight,0]).nice(),this.yScaleImpressions.domain(B.d(e,this.yAccessorImpressions)).range([t.boundedHeight,0]).nice(),this.xScale.domain(B.d(e,this.xAccessor)).range([0,t.boundedWidth]).nice()}},{key:"updateAxis",value:function(t){this.yAxisGroupClicks.transition(1e3).call(this.yAxisGeneratorClicks),this.yAxisGroupImpressions.transition(1e3).call(this.yAxisGeneratorImpressions).style("transform","translateX(".concat(t.boundedWidth,"px)")),this.xAxisGroup.transition(1e3).call(this.xAxisGenerator).style("transform","translateY(".concat(t.boundedHeight,"px)"))}},{key:"updateLegends",value:function(t){var e=this.legendGroup.selectAll("svg").data(this.pathData);e.exit().remove(),e.attr("x",(function(t,e){return 150*e})).attr("y",t.boundedHeight+25);var n=e.enter().append("svg").attr("viewBox","0 0 150 50").attr("x",(function(t,e){return 150*e})).attr("y",t.boundedHeight+25).attr("width",150).attr("height",60);n.append("rect").attr("x",0).attr("y",5).attr("width",30).attr("height",5).attr("fill",(function(t){return t.color})),n.append("text").attr("x",40).attr("y",12).attr("fill","#777").style("font-size","1.8rem").text((function(t){return t.title}))}},{key:"updatePaths",value:function(t,e){var n=this.chartGroup.selectAll("path").data(this.pathData);n.exit().remove(),n.transition(1e3).attr("d",(function(t){return t.lineGenerator(e)})),n.enter().append("path").attr("d",(function(t){return t.lineGenerator(e)})).attr("fill","none").attr("stroke",(function(t){return t.color})).attr("stroke-width",2)}}]),t}(),N=(n(238),function(t){var e=t.data,n=Object(a.useRef)(),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=Object(a.useRef)(),n=Object(a.useMemo)((function(){return G(t)}),[t]),r=Object(a.useState)(0),i=Object(c.a)(r,2),s=i[0],o=i[1],l=Object(a.useState)(0),h=Object(c.a)(l,2),d=h[0],p=h[1];Object(a.useEffect)((function(){var t=e.current,n=new C.a((function(t){if(Array.isArray(t)&&t.length){var e=t[0];s!==e.contentRect.width&&o(e.contentRect.width),d!==e.contentRect.height&&p(e.contentRect.height)}}));return n.observe(t),function(){return n.unobserve(t)}}),[n,d,s]);var f=Object(a.useMemo)((function(){return G(Object(u.a)({},n,{width:n.width||s,height:n.height||d}))}),[n,s,d]);return[e,f]}(),s=Object(c.a)(i,2),o=s[0],l=s[1];return Object(a.useEffect)((function(){n.current=new M(o.current)}),[o]),Object(a.useEffect)((function(){n.current.update(l,e)}),[l,e]),r.a.createElement("div",{ref:o,className:"chart"})});var R=function(){var t=S(),e=t.data,n=t.isLoading,i=t.error,s=Object(a.useState)({dataSources:[],campaigns:[]}),o=Object(c.a)(s,2),u=o[0],l=o[1],h=u.dataSources,d=u.campaigns,p=w(h,d,e);return i?r.a.createElement("div",null,"Unexpected error ocurred. Please refresh your page."):n?r.a.createElement(y,null):r.a.createElement("div",{className:"app"},r.a.createElement(v,{data:e,onApply:function(t){l(t)}}),r.a.createElement(N,{data:p}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[139,1,2]]]);
//# sourceMappingURL=main.54a1ec96.chunk.js.map